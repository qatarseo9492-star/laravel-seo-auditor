use App\Http\Controllers\AnalyzeController as AnalyzerController;<?php

use Illuminate\Support\Facades\Route;
use App\Http\Controllers\AnalyzerController;

/*
|--------------------------------------------------------------------------
| API Routes
|--------------------------------------------------------------------------
| These power the JS fetch() calls in your Blade pages.
| By default, these are automatically prefixed with /api
| e.g. POST /api/semantic-analyze
*/

Route::get('/status', function () {
    return response()->json([
        'ok'      => true,
        'service' => 'Semantic SEO Master Analyzer API',
        'version' => '1.0',
        'time'    => now()->toIso8601String(),
    ]);
})->name('api.status');

/*
| Main analyzer endpoints
| (use throttle middleware if you expect high traffic)
*/
Route::middleware('throttle:60,1')->group(function () {
    Route::post('/semantic-analyze', [AnalyzerController::class, 'semanticAnalyze'])->name('api.semantic');
    Route::post('/ai-check',         [AnalyzerController::class, 'aiCheck'])->name('api.aicheck');
    Route::post('/topic-cluster',    [AnalyzerController::class, 'topicClusterAnalyze'])->name('api.topiccluster');
});

/*
| Optional: Allow generic OPTIONS for CORS preflight if you’re calling
| the API from a different origin and don’t have a CORS package.
| You can remove this if you already handle CORS globally.
*/
// Route::options('/{any}', function () {
//     return response()->noContent(204);
// })->where('any', '.*');
